<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Premier choix — Smart Contracts Studio</title>
  <style>
    html,body { height:100%; margin:0; }
    body {
      background: #000; /* fond noir */
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial, sans-serif;
      color: #fff;
    }
    .container {
      display:flex;
      flex-direction:column;
      gap:16px;
      align-items:center;
      justify-content:center;
    }
    button.choice {
      background:#16a34a; /* vert */
      color:#051923;
      border:none;
      padding:14px 28px;
      font-size:18px;
      border-radius:8px;
      cursor:pointer;
      min-width:220px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.5);
    }
    button.choice:active { transform: translateY(1px); }
    .message {
      margin-top:18px;
      padding:10px 14px;
      background: rgba(255,255,255,0.04);
      border-radius:6px;
      color:#cfeee3;
      min-height:28px;
      display:flex;
      align-items:center;
      justify-content:center;
      max-width:420px;
      text-align:center;
    }
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <!-- boutons avec data-action pour event delegation -->
    <button class="choice" data-action="utilisateur" type="button" aria-label="Choisir Utilisateur">Utilisateur</button>
    <button class="choice" data-action="créateur" type="button" aria-label="Choisir Créateur">Créateur</button>
    <button class="choice" data-action="découvrir" type="button" aria-label="Découvrir le catalogue">Découvrir</button>

    <div class="message" id="message" role="status" aria-live="polite">Faites un choix pour commencer</div>
  </div>

  <script src="essai_clean.js" defer></script>
  <script defer>
    // Code d'initialisation UI : lisible, accessible et sans polluer le scope global
    (function(){
      var container = document.querySelector('.container');
      var msgEl = document.getElementById('message');

      // Fonction d'affichage centralisée (accessible par le module JS)
      function showMessage(text){
        if (!msgEl) return;
        msgEl.textContent = String(text || '');
      }

      // Expose la fonction d'affichage via l'API App (essai_clean.js lira cette fonction)
      window.App = window.App || {};
      window.App.showMessage = showMessage;

      // Event delegation : un seul écouteur pour les 3 boutons
      container.addEventListener('click', function (e) {
        var btn = e.target.closest('button[data-action]');
        if (!btn) return;
        var action = btn.getAttribute('data-action');
        // utilisation de l'API publique exposée dans essai_clean.js
        if (window.App && typeof window.App.premiereChoix === 'function') {
          window.App.premiereChoix(action);
        }
      });

      // Accessibilité clavier : Enter/Space
      container.addEventListener('keydown', function (e) {
        var btn = e.target.closest('button[data-action]');
        if (!btn) return;
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });

      // Petite amélioration visuelle si utilisateur réduit les animations
      try{
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
          document.documentElement.classList.add('reduced-motion');
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
